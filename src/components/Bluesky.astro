---
import agent from "../utils/bluesky";
import { CacheHeaders } from "cdn-cache-control";
import {BlueskyPost} from '@astro-community/astro-embed-bluesky'

export const prerender = false;

const { actor } = Astro.props

const {data} = await agent.getAuthorFeed({
    actor
})
const post = data.feed[0].post

// Caching
const headers = new CacheHeaders().ttl(1800);
headers.forEach((value, key) => Astro.response.headers.set(key, value))
---

<BlueskyPost id={post.uri} />

