---
import agent from "../utils/bluesky";
import { CacheHeaders, ONE_HOUR } from "cdn-cache-control";
import {BlueskyPost} from '@astro-community/astro-embed-bluesky'

const { actor } = Astro.props

const {data} = await agent.getAuthorFeed({
    actor
})
const post = data.feed[0].post

// Caching
const headers = new CacheHeaders().ttl(300);
headers.forEach((value, key) => Astro.response.headers.set(key, value))
---

<BlueskyPost id={post.uri} />

